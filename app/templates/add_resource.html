<!-- extend base layout -->
{% extends "base.html" %}

{% from "macros.html" import render_field with context %}

{% block content %}
<body id = "add_p">
  <div class="row">
      <h1 class="page-header">{{ title }}</h1>
      <hr align="center">
  </div>

	<form action="" method="POST" role="form" name="submit_food_resource">
	    {{ form.hidden_tag() }}

	    <!-- Additional Errors --> 
	    <div class="row">
		    <div class="large-8 medium-6 medium-centered small-12 columns large-centered 
		    	medium-centered">
		        	{% if additional_errors %}
		                {% for e in additional_errors %}
		                    {% if e %}
		                        <small class="error">{{ e }}</small>
		                    {% endif %}
		                {% endfor %}
		            {% endif %}
		      	</label>
		    </div>
		</div>

	   	<!-- Food Resource Name -->
	    {{ render_field(form.name) }}

		<!-- Food Resource Type -->
		{{ render_field(form.location_type) }}

		<!-- Address Line 1 -->
		{{ render_field(form.address_line1) }}

	  	<!-- Address Line 2 -->
	  	{{ render_field(form.address_line2) }}

		<!-- Address City --> 
		{{ render_field(form.address_city) }}

		<!-- Address State --> 
		{{ render_field(form.address_state) }}

		<!-- Address Zip Code --> 
		{{ render_field(form.address_zip_code) }}

		<!-- Address Phone Number --> 
		{{ render_field(form.phone_number) }}

		<!-- Website --> 
		{{ render_field(form.website) }}

		<div class="row">
		    <div class="large-8 medium-8 medium-centered small-8 small-centered
		     columns large-centered">
		      	<label>Days/Hours of Operation
				</label>
			</div>
		</div>

		<!-- Are hours of operation available? -->
		{{ render_field(form.are_hours_available) }}

		{% for multi_timeslot_form in form.daily_timeslots %}
		{% set day_of_week = days_of_week[loop.index0] %}
		{% set is_open = form.is_open[loop.index0].is_open %}
		{% set day_of_week_index = loop.index0 %}

		{{ form.is_open[loop.index0].form.hidden_tag() }}
		{{ multi_timeslot_form.form.hidden_tag() }}

			<div class="row open-or-closed-container">
			    <div class="large-8 medium-8 medium-centered small-8 small-centered
			     columns large-centered">
			    	<div class="row">
			      		<div class="small-4 columns" id="middle-padding-section">
			      			<label>{{ day_of_week.name }}
					        	<dd class="error">{{ is_open()|safe }}
					        	{% if is_open.errors %}
					                {% for e in is_open.errors %}
					                    {% if e %}
					                        <small class="error">{{ e }}</small>
					                    {% endif %}
					                {% endfor %}
					            {% endif %}
					            </dd>
			      			</label>
			      		</div>
			      		<div class="small-8 columns time-pickers" id="middle-padding-section">
			      			{% set field = multi_timeslot_form.num_timeslots %}
			      			<div class="row">
			      				<div class="large-12 small-12 columns" id="middle-padding-section">
			      					{% if multi_timeslot_form.num_timeslots.flags.required %}
								      	<label>{{ field.label(class_='required') }}
								    {% else %}
										<label>{{ field.label }}
								    {% endif %}
										<dd class="error">{{ field()|safe }}
										{% if field.errors %}
											{% for e in field.errors %}
												{% if e %}
													<small class="error">{{ e }}</small>
												{% endif %}
											{% endfor %}
										{% endif %}
										</dd>
									</label>
								</div>
			      			</div>
			      		{% for timeslot_form in multi_timeslot_form.timeslots %} 
		      			{% set timeslot_index = loop.index0 %}
			      			{{ timeslot_form.form.hidden_tag() }}
				      		<div class="row" id="daily_timeslots-{{ day_of_week_index }}-timeslots-{{ timeslot_index }}">
								<div class="large-6 small-6 columns" id="middle-padding-section">
									<label>{{ timeslot_form.starts_at.label }}
										<dd class="error">{{ timeslot_form.starts_at()|safe }}
										{% if timeslot_form.starts_at.errors %}
											{% for e in timeslot_form.starts_at.errors %}
												{% if e %}
													<small class="error">{{ e }}</small>
												{% endif %}
											{% endfor %}
										{% endif %}
										</dd>
									</label>
								</div>
								<div class="large-6 small-6 columns" id="middle-padding-section">
									<label>{{ timeslot_form.ends_at.label }}
										<dd class="error">{{ timeslot_form.ends_at()|safe }}
										{% if timeslot_form.ends_at.errors %}
											{% for e in timeslot_form.ends_at.errors %}
												{% if e %}
													<small class="error">{{ e }}</small>
												{% endif %}
											{% endfor %}
										{% endif %}
										</dd>
									</label>
								</div>
							</div>
							{% endfor %}
						</div>
					</div>
		   	  </div>
			</div>

		{% endfor %}

		<!-- Additional information -->
		{{ render_field(form.additional_information) }}

		<!-- Boolean fields --> 
		{{ render_field(form.requires_photo_id) }}
		{{ render_field(form.requires_proof_of_address) }}
		{{ render_field(form.requires_proof_of_income) }}
		{{ render_field(form.requires_social_security_card) }}
		{{ render_field(form.requires_referral) }}
		{{ render_field(form.accepts_snap) }}
		{{ render_field(form.accepts_fmnp_vouchers) }}
		{{ render_field(form.accepts_philly_food_bucks) }}
		{{ render_field(form.is_wheelchair_accessible) }}

		<div class="row">
		    <div class="large-8 medium-8 medium-centered small-8 small-centered
		     columns large-centered">
				<div class="required-disclaimer">
					Required fields.
				</div>
			</div>
		</div>	

		<div class="row">
		    <div class="large-8 medium-8 medium-centered small-8 small-centered
		     columns large-centered" id="bottom-padding-section">
	          <input type=submit class="button radius small" value=Submit>
		    </div>
		</div>
	</form>
</body>

<script>
	$(document).ready(function() {
		updateVisibleTimeslots(); 
		onChangeNumberOfTimeslots(); 
	}); 
</script>

{% endblock %}
